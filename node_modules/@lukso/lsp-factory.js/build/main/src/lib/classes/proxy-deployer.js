"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ProxyDeployer = void 0;
const experimental_1 = require("@ethersproject/experimental");
const __1 = require("../../");
const deployment_helper_1 = require("../helpers/deployment.helper");
class ProxyDeployer {
    constructor(signer) {
        this.signer = new experimental_1.NonceManager(signer);
    }
    async deployBaseContracts() {
        const universalProfile = await new __1.UniversalProfileInit__factory(this.signer).deploy();
        const universalReceiverDelegate = await new __1.LSP1UniversalReceiverDelegateInit__factory(this.signer).deploy();
        this.baseContracts = {
            universalProfile,
            universalReceiverDelegate,
        };
        return this.baseContracts;
    }
    async deployProxyContract(contract) {
        const proxyTx = await this.signer.sendTransaction({
            data: (0, deployment_helper_1.getProxyByteCode)(contract.address),
        });
        const proxyReceipt = await proxyTx.wait();
        return contract.attach(proxyReceipt.contractAddress);
    }
}
exports.ProxyDeployer = ProxyDeployer;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJveHktZGVwbG95ZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvbGliL2NsYXNzZXMvcHJveHktZGVwbG95ZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBRUEsOERBQTJEO0FBRTNELDhCQUtnQjtBQUNoQixvRUFBZ0U7QUFFaEUsTUFBYSxhQUFhO0lBT3hCLFlBQVksTUFBYztRQUN4QixJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksMkJBQVksQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUN6QyxDQUFDO0lBRUQsS0FBSyxDQUFDLG1CQUFtQjtRQUN2QixNQUFNLGdCQUFnQixHQUFHLE1BQU0sSUFBSSxpQ0FBNkIsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUM7UUFDdkYsTUFBTSx5QkFBeUIsR0FBRyxNQUFNLElBQUksOENBQTBDLENBQ3BGLElBQUksQ0FBQyxNQUFNLENBQ1osQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUVYLElBQUksQ0FBQyxhQUFhLEdBQUc7WUFDbkIsZ0JBQWdCO1lBQ2hCLHlCQUF5QjtTQUMxQixDQUFDO1FBRUYsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDO0lBQzVCLENBQUM7SUFFRCxLQUFLLENBQUMsbUJBQW1CLENBQXFCLFFBQVc7UUFDdkQsTUFBTSxPQUFPLEdBQUcsTUFBTSxJQUFJLENBQUMsTUFBTSxDQUFDLGVBQWUsQ0FBQztZQUNoRCxJQUFJLEVBQUUsSUFBQSxvQ0FBZ0IsRUFBQyxRQUFRLENBQUMsT0FBTyxDQUFDO1NBQ3pDLENBQUMsQ0FBQztRQUVILE1BQU0sWUFBWSxHQUFHLE1BQU0sT0FBTyxDQUFDLElBQUksRUFBRSxDQUFDO1FBRTFDLE9BQU8sUUFBUSxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsZUFBZSxDQUFDLENBQUM7SUFDdkQsQ0FBQztDQUNGO0FBbENELHNDQWtDQyJ9